<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html" charset="utf-8"/>
    <title>Hit Target Math Game</title>
    <script src="https://cdn.babylonjs.com/babylon.js"></script>
    <script src="https://preview.babylonjs.com/gui/babylon.gui.js"></script>
    <style>
        html, body {
            overflow: hidden;
            width   : 100%;
            height  : 100%;
            margin  : 0;
            padding : 0;
        }

        #renderCanvas {
            width   : 100%;
            height  : 100%;
            touch-action: none;
        }
    </style>
</head>
<body>
    <canvas id="renderCanvas"></canvas>
    <script>
      
        window.addEventListener('DOMContentLoaded', function(){
            // get the canvas DOM element
            var canvas = document.getElementById('renderCanvas');

            // load the 3D engine
            var engine = new BABYLON.Engine(canvas, true);

            // createScene function that creates and return the scene

	var createLogin = function () {

	
        // This creates a basic Babylon Scene object (non-mesh)
        var scene = new BABYLON.Scene(engine);

        //scene.clearColor = BABYLON.Color3.White();



				// This creates and positions a free camera (non-mesh)
				var camera = new BABYLON.UniversalCamera("camera1", new BABYLON.Vector3(0, 0, -10), scene);

				// This targets the camera to scene origin
				camera.setTarget(BABYLON.Vector3.Zero());

				// This attaches the camera to the canvas
				camera.attachControl(canvas, true);


				// GUI
				var advancedTexture = BABYLON.GUI.AdvancedDynamicTexture.CreateFullscreenUI("UI");

          

        var input = new BABYLON.GUI.InputText();
        input.width = "180px";
        input.maxWidth = 0.15;
        input.height = "35px";
        input.color = "black";
        input.background = "lightyellow";
        input.thickness = 0.15;
        input.focusedBackground = "white";
        advancedTexture.addControl(input);

        input.horizontalAlignment = BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_CENTER;
        input.top = "-110px";

        var input2 = new BABYLON.GUI.InputPassword();
        input2.width = "180px";
        input2.maxwidth = 0.15;
        input2.height = "35px";
        input2.color = "black";
        input2.background = "lightyellow";
        input2.thickness = 0.15;
        input2.focusedBackground = "white";
        advancedTexture.addControl(input2);

        input2.horizontalAlignment = BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_CENTER;
        input2.top = "-30px";

        var text1 = new BABYLON.GUI.TextBlock();
        text1.text = "Password";
        text1.color = "saddlebrown";
        text1.height = "43px";
        text1.fontFamily = "Blackadder ITC";
        text1.fontStyle = "italic";
        text1.fontSize = 35;
        advancedTexture.addControl(text1);

        text1.top = "-65px";
        text1.left = "-45px";

        var text2 = new BABYLON.GUI.TextBlock();
        text2.text = "Username";
        text2.color = "saddlebrown";
        text2.height = "43px";
        text2.fontFamily = "Blackadder ITC";
        text2.fontStyle = "italic";
        text2.fontSize = 35;
        advancedTexture.addControl(text2);

        text2.top = "-140px";
        text2.left = "-43px";

        var button = BABYLON.GUI.Button.CreateImageWithCenterTextButton("log_butt", "Login", "https://i.imgur.com/bhA9zYm.png");
        button.height = "90px";
        button.width = "290px";
        button.fontFamily = "Blackadder ITC";
        button.fontStyle = "italic";
        button.fontSize = 36;
        button.color = "gold";
        button.thickness = 0;
        advancedTexture.addControl(button);

        button.top = "40px";
        //button.left = "125px";

        button.onPointerClickObservable.add(function() {
			engine.runRenderLoop(function()
			{
				menu_scene.render();
			});
        });

        var background = new BABYLON.Layer("back", "https://i.imgur.com/GMKNx5T.png", scene);
        background.isBackground = true;



			return scene;

	};



          
		var createMenu = function () {

			// This creates a basic Babylon Scene object (non-mesh)
			var scene = new BABYLON.Scene(engine);

			// This creates and positions a free camera (non-mesh)
			var camera = new BABYLON.Camera("menu cam",BABYLON.Vector3.Zero());



			// This attaches the camera to the canvas
			camera.attachControl(canvas, true);




			// GUI
			var advancedTexture = BABYLON.GUI.AdvancedDynamicTexture.CreateFullscreenUI("ui1");

			var panel1 = new BABYLON.GUI.StackPanel();  
			panel1.width = .5;
			panel1.horizontalAlignment = BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_CENTER;
			panel1.top = -50;
			advancedTexture.addControl(panel1);
			var button1 = BABYLON.GUI.Button.CreateSimpleButton("PLAYbut", "PLAY");
			button1.width = 100;
			button1.height = "40px";
			button1.color = "black";
			button1.background = "lightblue";
			button1.onPointerUpObservable.add(function() {
			   engine.runRenderLoop(function(){
					game_scene.render();
				});
			});
			panel1.addControl(button1);



			var panel2 = new BABYLON.GUI.StackPanel();  
			panel2.width = .5;
			panel2.horizontalAlignment = BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_CENTER;
			panel2.top = 0;
			advancedTexture.addControl(panel2);
			var button2 = BABYLON.GUI.Button.CreateSimpleButton("STATSbut", "STATS");
			button2.width = 100;
			button2.height = "40px";
			button2.color = "black";
			button2.background = "lightblue";
			button2.onPointerUpObservable.add(function() {
				button2.background = "blue";

			   
			});
			panel2.addControl(button2);


			var panel3 = new BABYLON.GUI.StackPanel();  
			panel3.width = .5;
			panel3.horizontalAlignment = BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_CENTER;
			panel3.top = 100;
			advancedTexture.addControl(panel3);
			var button3 = BABYLON.GUI.Button.CreateSimpleButton("SETTINGSbut", "SETTINGS");
			button3.width = 100;
			button3.height = "40px";
			button3.color = "black";
			button3.background = "lightblue";
			button3.onPointerUpObservable.add(function() {
				button3.background = "blue";
			});
			panel3.addControl(button3);


			var panel4 = new BABYLON.GUI.StackPanel();  
			panel4.width = .5;
			panel4.horizontalAlignment = BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_CENTER;
			panel4.top = 50;
			advancedTexture.addControl(panel4);
			var button4 = BABYLON.GUI.Button.CreateSimpleButton("HOW2but", "HOW TO PLAY");
			button4.width = 100;
			button4.height = "40px";
			button4.color = "black";
			button4.background = "lightblue";
			button4.onPointerUpObservable.add(function() {
				button4.background = "blue";
			});
			panel4.addControl(button4);



			var panel5 = new BABYLON.GUI.StackPanel();  
			panel5.width = .2;
			panel5.horizontalAlignment = BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT;
			panel5.top = -250;
			advancedTexture.addControl(panel5);
			var button5 = BABYLON.GUI.Button.CreateSimpleButton("LOGOUTbut", "LOGOUT");
			button5.width = 100;
			button5.height = "40px";
			button5.color = "black";
			button5.background = "lightblue";
			button5.onPointerUpObservable.add(function() {
				engine.runRenderLoop(function()
				{
					login_scene.render();
				});
			});
			panel5.addControl(button5);

			var panel6 = new BABYLON.GUI.StackPanel();
			panel6.width = .2;
			panel6.horizontalAlignment = BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_RIGHT;
			panel6.top = -250;
			advancedTexture.addControl(panel6);
			var button6 = BABYLON.GUI.Button.CreateSimpleButton("NAMEbut", "USERNAME");
			button6.width = 100;
			button6.height = "40px";
			button6.color = "black";
			button6.background = "lightblue";
			button6.onPointerUpObservable.add(function() {
				button6.background = "blue";
			});
			panel6.addControl(button6);


		  var background = new BABYLON.Layer("back", "https://i.imgur.com/RRfSOHB.png", scene);
		  background.isBackground = true;

			return scene;

		};
		var createGame = function () 
		{

	
			// This creates a basic Babylon Scene object (non-mesh)
			var scene = new BABYLON.Scene(engine);
			//scene.clearColor = BABYLON.Color3.White();

			// This creates and positions a free camera (non-mesh)
			var camera = new BABYLON.UniversalCamera("camera1", new BABYLON.Vector3(0, 0, -10), scene);

				// This targets the camera to scene origin
			camera.setTarget(BABYLON.Vector3.Zero());

			// This attaches the camera to the canvas
			camera.attachControl(canvas, true);


			// GUI
			var advancedTexture = BABYLON.GUI.AdvancedDynamicTexture.CreateFullscreenUI("ui2");

			var text1 = new BABYLON.GUI.TextBlock();
			text1.color = "white";
			text1.height = "43px";
			text1.fontFamily = "Blackadder ITC";
			text1.fontStyle = "italic";
			text1.fontSize = 35;
			advancedTexture.addControl(text1);

			text1.top = "50px";
			text1.left = "0px";

			var output = new BABYLON.GUI.TextBlock();
			output.width = "180px";
			output.maxWidth = 0.15;
			output.height = "43px";
			output.color = "white";
			output.fontFamily = "Blackadder ITC";
			output.background = "lightyellow";
			output.thickness = 0.15;
			output.fontSize = 35;
			output.fontStyle = "italic";
			output.focusedBackground = "white";
			advancedTexture.addControl(output);

			output.horizontalAlignment = BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_CENTER;
			output.top = "150px";
			
			var param = "";
			var tmp;
			
			scene.actionManager = new BABYLON.ActionManager(scene);
			action = new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnKeyUpTrigger,function(event) 
			{
				var key = event.sourceEvent.key;      
				console.log(key) ;
				if (key == "Enter")
				{
					tmp *= tmp;
					output.text = tmp.toString();
				}
				else if (key == "Backspace") 
				{
					param = param.substring(0, param.length - 1);
					text1.text = param;
					tmp = parseInt(param);
				}
				else if
				(key == "0" || key == "1" || key == "2" || key == "3" || key == "4" || key == "5" || key == "6" || key == "7" || key == "8" || key == "9" || ".")
				{
					param += key;
					text1.text = param;
					tmp = parseInt(param);
				}
				
				console.log(text1.text);
				console.log(typeof param);
				console.log(typeof tmp);
			});
			scene.actionManager.registerAction(action);

			var text2 = new BABYLON.GUI.TextBlock();
			text2.text = "Type your number";
			text2.color = "white";
			text2.height = "43px";
			text2.fontFamily = "Blackadder ITC";
			text2.fontStyle = "italic";
			text2.fontSize = 35;
			advancedTexture.addControl(text2);

			text2.top = "25px";
			text2.left = "5px";

			var text3 = new BABYLON.GUI.TextBlock();
			text3.text = "Your Number Squared";
			text3.color = "white";
			text3.height = "43px";
			text3.fontFamily = "Blackadder ITC";
			text3.fontStyle = "italic";
			text3.fontSize = 35;
			advancedTexture.addControl(text3);

			text3.top = "125px";
			text3.left = "5px";
			
			var button = BABYLON.GUI.Button.CreateImageWithCenterTextButton("log_butt", "Menu", "https://i.imgur.com/bhA9zYm.png");
			button.height = "90px";
			button.width = "290px";
			button.fontFamily = "Blackadder ITC";
			button.fontStyle = "italic";
			button.fontSize = 36;
			button.color = "gold";
			button.thickness = 0;
			advancedTexture.addControl(button);
	
			button.top = "250px";
            button.left = BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_CENTER;
			
			
			button.onPointerClickObservable.add(function() 
			{
				engine.runRenderLoop(function()
				{
					menu_scene.render();
				});
			});

        var background = new BABYLON.Layer("back", "https://i.imgur.com/RRfSOHB.png", scene);
		background.isBackground = true;



			return scene;

	};


            // call the createLogin function
            var login_scene = createLogin(engine);
			
            // call the createMenu function
            var menu_scene = createMenu(engine);
			
			// call the createGame function
            var game_scene = createGame(engine);

            // run the render loop
            engine.runRenderLoop(function(){
                login_scene.render();
            });

            // the canvas/window resize event handler
            window.addEventListener('resize', function(){
                engine.resize();
            });
        });
    </script>
</body>
</html>
